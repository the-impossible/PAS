{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block title %} Programme Selection
{% endblock %}
{% block head %}
{% include "partials/auth_head.html" %}
{%endblock %}
{% block body %}
<div class="app">
    {% include "partials/auth_nav.html" %}
    <div class="app-wrapper">
	    <div class="app-content pt-3 p-md-3 p-lg-4">
		    <div class="container-xl">
			    <div class="row g-3 mb-4 align-items-center justify-content-between">
				    <div class="col-auto">
						<h1 class="app-page-title mb-0">
                            <a href="{% url 'assess:what_assess' dept.pk %}" class="btn btn-secodary"><i class="fa fa-arrow-left"></i></a>
                            {{ dept }} assessment selection
                        </h1>
				    </div>

			    </div><!--//row-->
				<!-- TABS NAVBAR -->
				<nav id="orders-table-tab" class="orders-table-tab app-nav-tabs nav shadow-sm flex-column flex-sm-row mb-4">
					{% for programme in programmes %}
					<a class="flex-sm-fill text-sm-center nav-link{% if forloop.counter == 1 %} active {% endif %}" id="tab{{programme.id}}" data-bs-toggle="tab" href="#content{{programme.id}}" role="tab" aria-controls="nd" aria-selected="true">{{programme}} Assessment Request Form</a>
					{% endfor %}
				</nav>
				<div class="row g-4">
					<div class="col-md-6 col-lg-6 col-sm-12 mx-auto ">
						<div class="tab-content" id="orders-table-tab-content">
							{% for programme in programmes %}
								<div class="tab-pane fade show {% if forloop.counter == 1 %} active {% endif %}" id="content{{programme.id}}" role="tabpanel" aria-labelledby="nd-tab">
									<div class="app-card app-card-orders-table shadow-sm pb-1 mb-5">
										<div class="app-card-header p-3">
											<div class="row justify-content-between align-items-center">
												<div class="col-auto">
													<h4 class="app-card-title">{{ programme }} Form</h4>
												</div>
											</div><!--//row-->
										</div><!--//app-card-header-->

										<div class="app-card-body">
											<div class="mx-5">
												<p class="text-center mb-3">Use the form to select which programme and what type of student seminar you want to make assessment</p>
												<form action="" method="post">
													<div id="form-errors">{{ form_errors }}</div>
													{% csrf_token %}
													{{ form|crispy }}
													<input type="hidden" class="form-control" name="prog_id" value="{{programme}}">
													<button type="submit" class="btn btn-success text-white mt-4 mx-auto">Get Assessment Page</button>
												</form>
											</div>
										</div>
										<div class="app-card-footer p-4 mt-auto"></div>
									</div><!--//app-card-->
								</div>
							{% endfor %}
						</div><!--//tab-content-->
					</div>
				</div>
		    </div><!--//container-fluid-->
	    </div><!--//app-content-->
	    {% include 'partials/auth_footer.html' %}
		{% include "partials/modal_logout.html" %}
    </div><!--//app-wrapper-->
    <!-- Javascript -->
	{% include "partials/auth_script.html" %}
</div>


<div class="modal fade" id="deleteFileModal" style="display: none;" aria-hidden="true">
	<div class="modal-dialog" id="deleteDialog" role="document" hx-target="this">

	</div>
</div>

<script>
	htmx.on('htmx:beforeSwap', (e) => {
	  if (e.detail.target.id === 'uploadDialog' && !e.detail.xhr.response){
		  modal.hide();
		}
	})

	var modal2 = new bootstrap.Modal(document.getElementById('deleteFileModal'))
	htmx.on('htmx:afterSwap', (e) => {
		if (e.detail.target.id === 'deleteDialog'){
		modal2.show();
	  }
	})

	htmx.on('htmx:beforeSwap', (e) => {
	  if (e.detail.target.id === 'deleteDialog' && !e.detail.xhr.response){
		modal2.hide();
		}
	})

</script>
{% endblock body %}
